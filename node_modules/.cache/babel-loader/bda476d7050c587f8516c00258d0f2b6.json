{"ast":null,"code":"import axios from\"axios\";import*as actionTypes from\"./ActionTypes\";export var FirstTimeAppLoaded=function FirstTimeAppLoaded(){return{type:actionTypes.FIRST_TIME_APP_LOADED};};export var LoginStart=function LoginStart(){return{type:actionTypes.LOGIN_START};};export var LoginSuccess=function LoginSuccess(user,profile,token){localStorage.setItem(\"token\",token);axios.defaults.headers[\"Authorization\"]=\"Token \".concat(token);return{type:actionTypes.LOGIN_SUCCESS,user:user,profile:profile,token:token};};export var LoginFailed=function LoginFailed(error){return{type:actionTypes.LOGIN_FAILED,error:error};};var headers={'Content-Type':'application/json','Access-Control-Allow-Origin':'*'};export var Login=function Login(data){return function(dispatch){dispatch(LoginStart());console.log('Reached Login');axios.post(\"/login\",data,{headers:headers}).then(function(res){dispatch(LoginSuccess(res.data.userDetails.user_id,res.data.userDetails.firstname,res.data.token));console.log('axios data',res.data);}).catch(function(err){dispatch(LoginFailed(err.response.data));console.log(err.response.data);});};};//LOGOUT\nexport var LogoutStart=function LogoutStart(){return{type:actionTypes.LOGOUT_START};};export var LogoutSuccess=function LogoutSuccess(){delete axios.defaults.headers[\"Authorization\"];// console.log(axios.defaults.headers);\nlocalStorage.removeItem(\"token\");return{type:actionTypes.LOGOUT_SUCCESS};};export var LogoutFailed=function LogoutFailed(error){return{type:actionTypes.LOGOUT_FAILED,error:error};};// Need to create the api for it\nexport var Logout=function Logout(data){return function(dispatch,getState){dispatch(LogoutStart());axios.post(\"/logout/\",data).then(function(res){dispatch(LogoutSuccess());}).catch(function(err){dispatch(LogoutFailed(err.response.data));});};};","map":{"version":3,"sources":["C:/Users/USER/Desktop/Work/virtualhost/src/store/actions/Auth.js"],"names":["axios","actionTypes","FirstTimeAppLoaded","type","FIRST_TIME_APP_LOADED","LoginStart","LOGIN_START","LoginSuccess","user","profile","token","localStorage","setItem","defaults","headers","LOGIN_SUCCESS","LoginFailed","error","LOGIN_FAILED","Login","data","dispatch","console","log","post","then","res","userDetails","user_id","firstname","catch","err","response","LogoutStart","LOGOUT_START","LogoutSuccess","removeItem","LOGOUT_SUCCESS","LogoutFailed","LOGOUT_FAILED","Logout","getState"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport * as actionTypes from \"./ActionTypes\";\r\n\r\nexport const FirstTimeAppLoaded = () => ({\r\n    type: actionTypes.FIRST_TIME_APP_LOADED,\r\n  });\r\n  \r\n  export const LoginStart = () => {\r\n    return { type: actionTypes.LOGIN_START };\r\n  };\r\n\r\n  export const LoginSuccess = (user, profile, token) => {\r\n    localStorage.setItem(\"token\", token);\r\n    axios.defaults.headers[\"Authorization\"] = `Token ${token}`;\r\n  \r\n    return {\r\n      type: actionTypes.LOGIN_SUCCESS,\r\n      user: user,\r\n      profile: profile,\r\n      token: token,\r\n    };\r\n  };\r\n\r\n  export const LoginFailed = (error) => ({\r\n    type: actionTypes.LOGIN_FAILED,\r\n    error: error,\r\n  });\r\n  \r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n    'Access-Control-Allow-Origin': '*'\r\n  }\r\n  export const Login = (data) => {\r\n    return (dispatch) => {\r\n      dispatch(LoginStart());\r\n      console.log('Reached Login');\r\n      axios\r\n        .post(\"/login\", data, {\r\n          headers: headers\r\n        })\r\n        .then((res) => {\r\n          dispatch(LoginSuccess(res.data.userDetails.user_id, res.data.userDetails.firstname, res.data.token));\r\n          console.log('axios data',res.data);\r\n        })\r\n        .catch((err) => {\r\n          dispatch(LoginFailed(err.response.data));\r\n          console.log(err.response.data);\r\n        });\r\n    };\r\n  };\r\n  \r\n  //LOGOUT\r\n  \r\n  export const LogoutStart = () => {\r\n    return { type: actionTypes.LOGOUT_START };\r\n  };\r\n  \r\n  export const LogoutSuccess = () => {\r\n    delete axios.defaults.headers[\"Authorization\"];\r\n    // console.log(axios.defaults.headers);\r\n    localStorage.removeItem(\"token\");\r\n    return {\r\n      type: actionTypes.LOGOUT_SUCCESS,\r\n    };\r\n  };\r\n  \r\n  export const LogoutFailed = (error) => ({\r\n    type: actionTypes.LOGOUT_FAILED,\r\n    error: error,\r\n  });\r\n\r\n  // Need to create the api for it\r\n  \r\n  export const Logout = (data) => {\r\n    return (dispatch, getState) => {\r\n      dispatch(LogoutStart());\r\n      axios\r\n        .post(\"/logout/\", data)\r\n        .then((res) => {\r\n          dispatch(LogoutSuccess());\r\n        })\r\n        .catch((err) => {\r\n          dispatch(LogoutFailed(err.response.data));\r\n        });\r\n    };\r\n  };\r\n  "]},"metadata":{},"sourceType":"module"}